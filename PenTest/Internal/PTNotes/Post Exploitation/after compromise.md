pentest note detailing the steps to take after compromising a host, including creating and elevating a user account, scheduling tasks, and performing other critical actions:

---

## Post-Host Compromise Actions

### 1. **Creating and Elevating a User Account**

#### Connect to the Target System
- **Objective**: Gain administrative access to the compromised host.
- **Tool**: Use the `Computer Management` console (`compmgmt.msc`).
- **Steps**:
  1. Log in as a user with `Server Operators` group privileges (e.g., `SrvOperator`).
  2. Launch `compmgmt.msc` on the compromised system.

#### Create a New Local User
- **Objective**: Establish persistent access by creating a new local user.
- **Userne**: `NISPentest`
- **Steps**:
  1. In `compmgmt.msc`, navigate to **Local Users and Groups** > **Users**.
  2. Right-click and select **New User...**.
  3. Enter the userne `NISPentest` and set a secure password.
  4. Ensure password options like "User must change password at next logon" are deselected.
  5. Click **Create** to finalize the account creation.

#### Elevate the User to Administrator
- **Objective**: Gain administrative privileges for the `NISPentest` account.
- **Steps**:
  1. In `compmgmt.msc`, navigate to **Local Users and Groups** > **Groups**.
  2. Find and double-click the **Administrators** group.
  3. Click **Add...** and enter `NISPentest`.
  4. Confirm to add `NISPentest` to the `Administrators` group.

### 2. **Scheduling Tasks for Persistence**

#### Create a Scheduled Task
- **Objective**: Maintain persistence by scheduling a task that runs with elevated privileges.
- **Tool**: Task Scheduler (`taskschd.msc`), `schtasks.exe`, or PowerShell.
- **Steps**:
  1. Open **Task Scheduler** on the compromised host.
  2. Create a new task:
     - **General**: ne it something benign (e.g., `SystemUpdate`).
     - **Triggers**: Set it to run at startup or on a regular interval.
     - **Actions**: Set it to run a command or script that ensures continued access.
  3. Configure the task to run with administrative privileges.
  4. Save the task and verify it is active.

- **Example Command** (via `schtasks.exe`):
```bash
schtasks /create /sc onstart /tn "SystemUpdate" /tr "cmd.exe /c <command_or_script>" /ru SYSTEM
```

### 3. **Transferring Files**

#### Use WMI for File Transfer
- **Objective**: Transfer necessary tools or scripts to the compromised host.
- **Tool**: `wmic` command, PowerShell.
- **Steps**:
  1. Use the following command to copy files remotely:
```bash
wmic /node:RemotePC process call create "xcopy /Y C:\Path\To\example.txt C:\Destination\"
```

### 4. **Maintaining Access**

#### Mount Network Shares
- **Objective**: Access network shares for lateral movement or data exfiltration.
- **Command**:
```bash
net use * \\TargetPC\c$ /u:Domain\User Password
```

#### Execute Commands Remotely
- **Objective**: Run commands or scripts remotely to maintain control or further explore the network.
- **Tool**: `wmic`, PowerShell.
- **Example Command**:
```bash
wmic /node:"RemotePC" process call create "cmd.exe /c <command_or_script>"
```

### 5. **Cleanup and Covering Tracks**

#### Remove Logs and Artifacts-NotOnCoporate
- **Objective**: Reduce the chances of detection by clearing logs and removing artifacts.
- **Tools**: PowerShell, native commands.
- **Steps**:
  1. Clear Windows event logs:
```powershell
wevtutil cl System
wevtutil cl Security
wevtutil cl Application
```
  2. Delete any files or scripts left on the host that could be traced back to your activities.
